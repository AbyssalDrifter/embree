## Copyright 2009-2021 Intel Corporation
## SPDX-License-Identifier: Apache-2.0

ADD_EXECUTABLE(minimal ../../kernels/embree.rc minimal.cpp)
TARGET_LINK_LIBRARIES(minimal embree)
SET_PROPERTY(TARGET minimal PROPERTY FOLDER tutorials/single)
SET_PROPERTY(TARGET minimal APPEND PROPERTY COMPILE_FLAGS " ${FLAGS_LOWEST}")
INSTALL(TARGETS minimal DESTINATION "${CMAKE_INSTALL_BINDIR}" COMPONENT examples)
SIGN_TARGET(minimal)

IF (EMBREE_DPCPP_SUPPORT)
  ADD_EXECUTABLE(minimal_sycl minimal_sycl.cpp)
  TARGET_LINK_LIBRARIES(minimal_sycl embree)
  TARGET_COMPILE_DEFINITIONS(minimal_sycl PUBLIC EMBREE_SYCL_TUTORIAL)
  SET_PROPERTY(TARGET minimal_sycl PROPERTY FOLDER tutorials/sycl)
  SET_PROPERTY(TARGET minimal_sycl APPEND PROPERTY COMPILE_FLAGS " ${FLAGS_LOWEST} ${CMAKE_CXX_FLAGS_SYCL}")
  SET_PROPERTY(TARGET minimal_sycl APPEND PROPERTY LINK_FLAGS "${CMAKE_LINK_FLAGS_SYCL}")
  INSTALL(TARGETS minimal_sycl DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT examples)
  SIGN_TARGET(minimal_sycl)
ENDIF()
